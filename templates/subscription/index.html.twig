{% extends 'base.html.twig' %}

{% block title %}My subscription{% endblock %}

{% block body %}
    <style>
        *, ::after, ::before {
            box-sizing: border-box;
        }
        
        body {
            font-family: Open Sans, mm-main, Arial, sans-serif;
            font-size: 14px;
        }
    </style>
    <div>
        <a class="new-sub-link" href="{{ path('user_index') }}">Profile</a><span> > Subcriptions</span>
        <h1>My subscription</h1>
        <span>
            <i class="fas fa-heart"></i>
           <a class="new-sub-link" href="{{ path('new_subscription') }}">Create a new subscription</a>
        </span>
    </div>
    <nav class="sub-nav">
        <div class="sub-nav-container">
            <ul class="sub-nav-wrapper">
                <li class="sub-nav-item">
                    <a class="sub-nav-item-link" href="#">Active Subscription</a>
                </li>
                <li class="sub-nav-item">
                    <a class="sub-nav-item-link" href="#">Inactive Subscription</a>
                </li>
            </ul>
        </div>
    </nav>
    {% for subscription in subscriptions %}
        <div class="subscription">
            <h1>{{ subscription.name }}</h1>
            {% if subscription.period.y == 1 %}{% set date_text = 'year' %}{% endif %}
            {% if subscription.period.y > 1 %}{% set date_text = subscription.period.y ~ ' years' %}{% endif %}
            {% if subscription.period.m == 1 %}{% set date_text = 'month' %}{% endif %}
            {% if subscription.period.m > 1 %}{% set date_text = subscription.period.m ~ ' months' %}{% endif %}
            {% if subscription.period.d == 1 %}{% set date_text = 'day' %}{% endif %}
            {% if subscription.period.d > 1 %}{% set date_text = subscription.period.d ~ ' days' %}{% endif %}
            <p>Every {{ date_text }}</p>
            <p>Next delivery: {{ subscription.nextDelivery|date }}</p>
            {% for product in subscription.subscriptionProducts %}
                <div class="subscription-product">
                    <h2>{{ product.product.name }}</h2>
                    <p>{{ product.price }} â‚¬</p>
                    <p>Quantity: {{ product.quantity }}</p>
                </div>
            {% endfor %}
        </div>
    {% endfor %}
    <header>
        {# inclure the render for active or inactive subs #}
    </header>
{% endblock %}
